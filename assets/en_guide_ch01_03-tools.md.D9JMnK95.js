import{_ as e,I as t,o as l,c as r,ak as i,J as n}from"./chunks/framework.CGzjHEBf.js";const u=JSON.parse('{"title":"1.3 Common Open Source Tools","description":"Understanding the open source tool ecosystem for medical imaging processing and mastering best practices for tool selection and usage","frontmatter":{"title":"1.3 Common Open Source Tools","description":"Understanding the open source tool ecosystem for medical imaging processing and mastering best practices for tool selection and usage"},"headers":[],"relativePath":"en/guide/ch01/03-tools.md","filePath":"en/guide/ch01/03-tools.md"}'),p={name:"en/guide/ch01/03-tools.md"};function o(h,s,k,d,g,c){const a=t("Mermaid");return l(),r("div",null,[s[0]||(s[0]=i('<h1 id="_1-3-common-open-source-tools" tabindex="-1">1.3 Common Open Source Tools <a class="header-anchor" href="#_1-3-common-open-source-tools" aria-label="Permalink to ‚Äú1.3 Common Open Source Tools‚Äù">‚Äã</a></h1><blockquote><p>&quot;Tools are not the goal, but a bridge to understanding. Choosing the right tool allows you to focus on the problem itself, not technical details.&quot; ‚Äî‚Äî The Spirit of Open Source</p></blockquote><p>Imagine this scenario: You just joined a medical imaging research team, and your advisor gave you a hard drive containing 1000 patients&#39; CT scan DICOM files. Your task is to: convert this data to NIfTI format, check data quality, extract lung regions, and finally train a deep learning model.</p><p>Facing this task, you might ask:</p><ul><li>What tool should I use to convert DICOM to NIfTI? Command-line tool or Python script?</li><li>How can I quickly visualize and check the quality of 1000 scans?</li><li>Which Python library is best for reading and processing medical images?</li><li>What software do I need to install? How do they work together?</li></ul><p>This chapter will introduce you to the open source tool ecosystem for medical imaging processing, helping you quickly select the right tool for specific scenarios and laying a solid foundation for the in-depth learning in subsequent chapters.</p><hr><h2 id="üó∫Ô∏è-medical-imaging-processing-workflow-and-tool-map" tabindex="-1">üó∫Ô∏è Medical Imaging Processing Workflow and Tool Map <a class="header-anchor" href="#üó∫Ô∏è-medical-imaging-processing-workflow-and-tool-map" aria-label="Permalink to ‚Äúüó∫Ô∏è Medical Imaging Processing Workflow and Tool Map‚Äù">‚Äã</a></h2><h3 id="typical-workflow" tabindex="-1">Typical Workflow <a class="header-anchor" href="#typical-workflow" aria-label="Permalink to ‚ÄúTypical Workflow‚Äù">‚Äã</a></h3><p>A complete medical imaging processing project typically includes the following stages:</p>',10)),n(a,{id:"mermaid-9yy4j2e6h",code:`graph LR
    A[Data Acquisition] --> B[Format Conversion]
    B --> C[Visualization Check]
    C --> D[Preprocessing]
    D --> E[Analysis/Reconstruction]
    E --> F[Result Output]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
    style D fill:#e1ffe1
    style E fill:#f5e1ff
    style F fill:#ffe1e1`}),s[1]||(s[1]=i(`<p><strong>Core tasks at each stage</strong>:</p><ul><li><strong>Data Acquisition</strong>: Obtain raw data from PACS systems, research databases, or public datasets</li><li><strong>Format Conversion</strong>: Convert DICOM to research-common formats (NIfTI, NRRD, etc.)</li><li><strong>Visualization Check</strong>: Quickly browse data to discover scanning artifacts, annotation errors, etc.</li><li><strong>Preprocessing</strong>: Denoising, registration, resampling, normalization, etc.</li><li><strong>Analysis/Reconstruction</strong>: Implement core algorithms (reconstruction, segmentation, registration, etc.)</li><li><strong>Result Output</strong>: Generate reports, visualize results, save processed data</li></ul><h3 id="tool-classification-matrix" tabindex="-1">Tool Classification Matrix <a class="header-anchor" href="#tool-classification-matrix" aria-label="Permalink to ‚ÄúTool Classification Matrix‚Äù">‚Äã</a></h3><p>The following table shows the applicability of different types of tools at each stage:</p><table tabindex="0"><thead><tr><th>Tool Type</th><th>Format Conversion</th><th>Visualization</th><th>Preprocessing</th><th>Algorithm Implementation</th><th>Typical Representatives</th></tr></thead><tbody><tr><td><strong>Command-line Tools</strong></td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê</td><td>dcm2niix, FSL</td></tr><tr><td><strong>Python Libraries</strong></td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>pydicom, SimpleITK</td></tr><tr><td><strong>GUI Software</strong></td><td>‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê</td><td>3D Slicer, ITK-SNAP</td></tr><tr><td><strong>Complete Platforms</strong></td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td><td>FreeSurfer, FSL</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">üí° Golden Rules for Tool Selection</p><ul><li><strong>Simple tasks use command-line</strong>: Batch conversion, standardized workflows</li><li><strong>Complex logic use Python</strong>: Conditional logic, loops, integration with other libraries</li><li><strong>Interactive exploration use GUI</strong>: Data quality checking, parameter tuning, demonstrations</li><li><strong>Complete workflows use platforms</strong>: Standardized analysis pipelines (e.g., FreeSurfer cortical reconstruction)</li></ul></div><hr><h2 id="üîß-in-depth-analysis-of-core-tools" tabindex="-1">üîß In-Depth Analysis of Core Tools <a class="header-anchor" href="#üîß-in-depth-analysis-of-core-tools" aria-label="Permalink to ‚Äúüîß In-Depth Analysis of Core Tools‚Äù">‚Äã</a></h2><h3 id="_1-format-conversion-tools" tabindex="-1">1. Format Conversion Tools <a class="header-anchor" href="#_1-format-conversion-tools" aria-label="Permalink to ‚Äú1. Format Conversion Tools‚Äù">‚Äã</a></h3><h4 id="dcm2niix-the-de-facto-standard-for-dicom-conversion" tabindex="-1">dcm2niix: The De Facto Standard for DICOM Conversion <a class="header-anchor" href="#dcm2niix-the-de-facto-standard-for-dicom-conversion" aria-label="Permalink to ‚Äúdcm2niix: The De Facto Standard for DICOM Conversion‚Äù">‚Äã</a></h4><p><strong>Official Resources</strong>:</p><ul><li>üåê GitHub Repository: <a href="https://github.com/rordenlab/dcm2niix" target="_blank" rel="noreferrer">https://github.com/rordenlab/dcm2niix</a></li><li>üìñ Documentation: <a href="https://github.com/rordenlab/dcm2niix/blob/master/README.md" target="_blank" rel="noreferrer">https://github.com/rordenlab/dcm2niix/blob/master/README.md</a></li></ul><p><strong>Design Philosophy</strong>: dcm2niix, developed by Chris Rorden, aims to provide the fastest and most accurate DICOM to NIfTI conversion tool. Written in C++, it has no external dependencies and can process thousands of DICOM files in seconds.</p><p><strong>Core Advantages</strong>:</p><ul><li><strong>Extremely fast</strong>: C++ implementation, 10-100 times faster than Python scripts</li><li><strong>Automated processing</strong>: Automatically identifies DICOM hierarchy (Patient ‚Üí Study ‚Üí Series ‚Üí Instance)</li><li><strong>Metadata preservation</strong>: Outputs metadata in JSON format, preserving key scanning parameters</li><li><strong>Broad compatibility</strong>: Supports DICOM formats from major vendors like Siemens, GE, Philips, Canon</li><li><strong>BIDS-friendly</strong>: Output file naming complies with Brain Imaging Data Structure standard</li></ul><p><strong>Applicable Scenarios</strong>:</p><ul><li>‚úÖ Batch convert research datasets</li><li>‚úÖ Build automated processing pipelines</li><li>‚úÖ Need to preserve complete metadata</li><li>‚ùå Need to embed conversion logic in Python scripts (use SimpleITK)</li><li>‚ùå Need interactive parameter adjustment (use 3D Slicer)</li></ul><p><strong>Minimal Example</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Basic usage: convert single directory</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dcm2niix</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> output_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input_dir</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Advanced usage: custom file naming</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dcm2niix</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> output_dir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;%p_%s_%t&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input_dir</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># %p = patient name, %s = series description, %t = time</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Output compressed format and preserve metadata</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dcm2niix</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -z</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> y</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> y</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> output_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input_dir</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Comparison with Other Tools</strong>:</p><table tabindex="0"><thead><tr><th>Tool</th><th>Speed</th><th>Metadata Preservation</th><th>Ease of Use</th><th>Cross-platform</th><th>Recommendation</th></tr></thead><tbody><tr><td><strong>dcm2niix</strong></td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>First Choice</td></tr><tr><td><strong>MRIcron</strong></td><td>‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td><td>For GUI Users</td></tr><tr><td><strong>pydicom</strong></td><td>‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>When Customization Needed</td></tr><tr><td><strong>SimpleITK</strong></td><td>‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>Python Integration</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">‚ö†Ô∏è Common Pitfalls</p><ol><li><strong>Multi-echo sequences</strong>: dcm2niix generates separate NIfTI files for each echo, requiring manual merging</li><li><strong>Enhanced scans</strong>: Dynamic enhanced scans may be split into multiple time points, check output JSON file</li><li><strong>Coordinate system</strong>: Default output is RAS+ coordinate system, different from some software defaults (e.g., FSL)</li></ol></div><hr><h3 id="_2-python-ecosystem" tabindex="-1">2. Python Ecosystem <a class="header-anchor" href="#_2-python-ecosystem" aria-label="Permalink to ‚Äú2. Python Ecosystem‚Äù">‚Äã</a></h3><p>Python is the most popular programming language for medical imaging processing, with a rich set of tool libraries. The following is an in-depth introduction to three core libraries.</p><h4 id="pydicom-python-interface-to-dicom" tabindex="-1">pydicom: Python Interface to DICOM <a class="header-anchor" href="#pydicom-python-interface-to-dicom" aria-label="Permalink to ‚Äúpydicom: Python Interface to DICOM‚Äù">‚Äã</a></h4><p><strong>Official Resources</strong>:</p><ul><li>üåê Official Website: <a href="https://pydicom.github.io/" target="_blank" rel="noreferrer">https://pydicom.github.io/</a></li><li>üì¶ GitHub Repository: <a href="https://github.com/pydicom/pydicom" target="_blank" rel="noreferrer">https://github.com/pydicom/pydicom</a></li><li>üìñ Documentation: <a href="https://pydicom.github.io/pydicom/stable/" target="_blank" rel="noreferrer">https://pydicom.github.io/pydicom/stable/</a></li></ul><p><strong>Design Philosophy</strong>: pydicom is a pure Python implementation of the DICOM standard library, aiming to provide complete access to all DICOM standard features. It has no external C/C++ dependencies, making it easy to install and debug.</p><p><strong>Core Advantages</strong>:</p><ul><li><strong>Complete DICOM support</strong>: Read, modify, create DICOM files</li><li><strong>Flexible Tag access</strong>: Access metadata by tag name or number</li><li><strong>Pure Python implementation</strong>: Easy to integrate into existing projects, no compilation dependencies</li><li><strong>Active community</strong>: Over 4000 stars on GitHub, quick issue response</li></ul><p><strong>Applicable Scenarios</strong>:</p><ul><li>‚úÖ Need to read/modify specific DICOM Tags</li><li>‚úÖ Build automated DICOM processing pipelines</li><li>‚úÖ Integrate with Pandas/NumPy for data analysis</li><li>‚úÖ Develop DICOM network services (with pynetdicom)</li><li>‚ùå Need high-performance image processing (use SimpleITK)</li></ul><p><strong>Minimal Example</strong>:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pydicom</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numpy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Read DICOM file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pydicom.dcmread(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ct_scan.dcm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Access metadata</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Patient Name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ds.PatientName</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Study Date: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ds.StudyDate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Slice Thickness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ds.SliceThickness</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get pixel data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pixel_array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ds.pixel_array  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Returns NumPy array</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Apply window/level</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">slope </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ds.RescaleSlope </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> hasattr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ds, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;RescaleSlope&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">intercept </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ds.RescaleIntercept </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> hasattr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ds, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;RescaleIntercept&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hu_array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pixel_array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> slope </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> intercept  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Convert to HU values</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><details class="details custom-block"><summary>üîç Common Pitfalls and Solutions</summary><p><strong>Pitfall 1: Pixel data not automatically scaled</strong></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚ùå Wrong: Use pixel_array directly</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pixel_array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ds.pixel_array  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># May be raw storage values</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚úÖ Correct: Apply RescaleSlope and RescaleIntercept</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hu_array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ds.pixel_array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ds.RescaleSlope </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ds.RescaleIntercept</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Pitfall 2: Cannot read compressed DICOM</strong></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Solution: Install decompression libraries</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># pip install pylibjpeg pylibjpeg-libjpeg pylibjpeg-openjpeg</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Pitfall 3: Not handling DICOM hierarchy</strong></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># pydicom only reads single files, need to traverse directory yourself</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pathlib </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Path</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dicom_files </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> root, dirs, files </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.walk(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dicom_dir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> files:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.endswith(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.dcm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            dicom_files.append(os.path.join(root, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></details><hr><h4 id="nibabel-swiss-army-knife-for-neuroimaging" tabindex="-1">nibabel: Swiss Army Knife for Neuroimaging <a class="header-anchor" href="#nibabel-swiss-army-knife-for-neuroimaging" aria-label="Permalink to ‚Äúnibabel: Swiss Army Knife for Neuroimaging‚Äù">‚Äã</a></h4><p><strong>Official Resources</strong>:</p><ul><li>üåê Official Website: <a href="https://nipy.org/nibabel/" target="_blank" rel="noreferrer">https://nipy.org/nibabel/</a></li><li>üì¶ GitHub Repository: <a href="https://github.com/nipy/nibabel" target="_blank" rel="noreferrer">https://github.com/nipy/nibabel</a></li><li>üìñ Documentation: <a href="https://nipy.org/nibabel/manual.html" target="_blank" rel="noreferrer">https://nipy.org/nibabel/manual.html</a></li></ul><p><strong>Design Philosophy</strong>: nibabel (NeuroimagingBabel) aims to provide a unified interface for accessing multiple neuroimaging formats. It is a core component of the NiPy (Neuroimaging in Python) project, focusing on correctly handling medical imaging coordinate systems and affine transformations.</p><p><strong>Core Advantages</strong>:</p><ul><li><strong>Multi-format support</strong>: NIfTI, GIFTI, CIFTI, MGH, MINC, Analyze, etc.</li><li><strong>Coordinate system correctness</strong>: Correctly handles affine matrices, avoiding common errors like left-right flipping</li><li><strong>Seamless NumPy integration</strong>: Data returned as NumPy arrays</li><li><strong>Lazy loading</strong>: Memory-efficient handling of large files</li></ul><p><strong>Applicable Scenarios</strong>:</p><ul><li>‚úÖ Neuroimaging research (fMRI, DTI, structural imaging)</li><li>‚úÖ Need to handle coordinate system conversion</li><li>‚úÖ Integration with scikit-learn/PyTorch/TensorFlow</li><li>‚úÖ Read/write NIfTI format (most common)</li><li>‚ùå Need complex image processing operations (use SimpleITK)</li></ul><p><strong>Minimal Example</strong>:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nibabel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nib</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numpy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Load NIfTI file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">img </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nib.load(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;brain.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get data array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.get_fdata()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Returns NumPy array, shape like (256, 256, 180)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get affine matrix (voxel coordinates ‚Üí world coordinates)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">affine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.affine</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Voxel size: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">img.header.get_zooms()</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># e.g., (1.0, 1.0, 1.0) mm</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Modify data and save</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data_modified </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Simple intensity scaling</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">img_new </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nib.Nifti1Image(data_modified, affine, img.header)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nib.save(img_new, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;brain_modified.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>Coordinate System Handling</strong>:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Convert voxel coordinates to world coordinates</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">voxel_coords </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np.array([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Homogeneous coordinates</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">world_coords </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> affine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> voxel_coords</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;World coordinates: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">world_coords[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Output RAS+ coordinates</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get image orientation information</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">orientation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nib.aff2axcodes(affine)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Image orientation: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">orientation</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># e.g., (&#39;R&#39;, &#39;A&#39;, &#39;S&#39;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">üí° NIfTI-1 vs NIfTI-2</p><ul><li><strong>NIfTI-1</strong>: Most commonly used, 348-byte file header, supports up to 32767 voxels</li><li><strong>NIfTI-2</strong>: Released in 2011, 540-byte file header, supports larger image sizes</li><li>nibabel automatically recognizes both formats, no manual specification needed</li></ul></div><hr><h4 id="simpleitk-industrial-grade-image-processing-library" tabindex="-1">SimpleITK: Industrial-Grade Image Processing Library <a class="header-anchor" href="#simpleitk-industrial-grade-image-processing-library" aria-label="Permalink to ‚ÄúSimpleITK: Industrial-Grade Image Processing Library‚Äù">‚Äã</a></h4><p><strong>Official Resources</strong>:</p><ul><li>üåê Official Website: <a href="https://simpleitk.org/" target="_blank" rel="noreferrer">https://simpleitk.org/</a></li><li>üì¶ GitHub Repository: <a href="https://github.com/SimpleITK/SimpleITK" target="_blank" rel="noreferrer">https://github.com/SimpleITK/SimpleITK</a></li><li>üìñ Documentation: <a href="https://simpleitk.readthedocs.io/" target="_blank" rel="noreferrer">https://simpleitk.readthedocs.io/</a></li><li>üìì Jupyter Tutorials: <a href="https://github.com/InsightSoftwareConsortium/SimpleITK-Notebooks" target="_blank" rel="noreferrer">https://github.com/InsightSoftwareConsortium/SimpleITK-Notebooks</a></li></ul><p><strong>Design Philosophy</strong>: SimpleITK is a simplified interface to ITK (Insight Segmentation and Registration Toolkit), providing bindings for Python, R, Java, C#, and other languages. It encapsulates ITK&#39;s powerful image processing capabilities into an easy-to-use API while maintaining high performance.</p><p><strong>Core Advantages</strong>:</p><ul><li><strong>Supports almost all medical imaging formats</strong>: DICOM, NIfTI, NRRD, MetaImage, etc.</li><li><strong>Rich built-in algorithms</strong>: Registration, segmentation, filtering, morphological operations</li><li><strong>C++ backend</strong>: Excellent performance, suitable for large-scale data processing</li><li><strong>Complete tutorials</strong>: Official provides 100+ Jupyter Notebook tutorials</li></ul><p><strong>Applicable Scenarios</strong>:</p><ul><li>‚úÖ Need complex image processing operations (registration, segmentation, filtering)</li><li>‚úÖ Multi-modal registration</li><li>‚úÖ Build complete processing pipelines</li><li>‚úÖ Need high-performance processing of large-scale data</li><li>‚ùå Only need simple read/write operations (use nibabel for lighter weight)</li></ul><p><strong>Minimal Example</strong>:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SimpleITK </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Read image (automatically identify format)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.ReadImage(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ct.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get image information</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Image size: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">image.GetSize()</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Voxel spacing: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">image.GetSpacing()</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Image origin: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">image.GetOrigin()</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Convert to NumPy array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.GetArrayFromImage(image)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Note: axis order is (z, y, x)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Image resampling</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">new_spacing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Target voxel spacing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resampler </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.ResampleImageFilter()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resampler.SetOutputSpacing(new_spacing)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resampler.SetInterpolator(sitk.sitkLinear)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resampled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resampler.Execute(image)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Save result</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sitk.WriteImage(resampled, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ct_resampled.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>Advanced Features Example</strong>:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Image registration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fixed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.ReadImage(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ct_fixed.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">moving </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.ReadImage(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ct_moving.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Use rigid registration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">registration_method </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.ImageRegistrationMethod()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">registration_method.SetMetricAsMeanSquares()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">registration_method.SetOptimizerAsRegularStepGradientDescent(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    learningRate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    minStep</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    numberOfIterations</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">registration_method.SetInterpolator(sitk.sitkLinear)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">transform </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> registration_method.Execute(fixed, moving)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">registered </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.Resample(moving, fixed, transform)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">‚ö†Ô∏è NumPy Array Axis Order</p><p>SimpleITK and NumPy have different axis orders:</p><ul><li><strong>SimpleITK</strong>: (x, y, z) - follows medical imaging convention</li><li><strong>NumPy</strong>: (z, y, x) - follows array indexing convention</li></ul><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># SimpleITK ‚Üí NumPy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sitk_image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.ReadImage(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numpy_array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.GetArrayFromImage(sitk_image)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Axis order becomes (z, y, x)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># NumPy ‚Üí SimpleITK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sitk_image_new </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.GetImageFromArray(numpy_array)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Axis order restored to (x, y, z)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sitk_image_new.CopyInformation(sitk_image)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Copy spacing, origin, etc.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div><hr><h4 id="python-tool-selection-decision-tree" tabindex="-1">Python Tool Selection Decision Tree <a class="header-anchor" href="#python-tool-selection-decision-tree" aria-label="Permalink to ‚ÄúPython Tool Selection Decision Tree‚Äù">‚Äã</a></h4>`,66)),n(a,{id:"mermaid-orkhw4xjo",code:`graph TD
    A[Need to process medical images?] --> B{Data format?}
    B -->|DICOM| C{What do you need?}
    C -->|Just read pixel data| D[pydicom<br/>Simple and fast]
    C -->|Modify DICOM Tags| D
    C -->|Complex processing| E[SimpleITK<br/>Powerful]
    
    B -->|NIfTI| F{What do you need?}
    F -->|Just read/write data| G[nibabel<br/>Lightweight and efficient]
    F -->|Image processing operations| E
    
    B -->|Multiple formats| E
    
    style D fill:#e1f5ff
    style G fill:#ffe1f5
    style E fill:#e1ffe1`}),s[2]||(s[2]=i(`<p><strong>Quick Selection Guide</strong>:</p><table tabindex="0"><thead><tr><th>Scenario</th><th>Recommended Tool</th><th>Reason</th></tr></thead><tbody><tr><td>Read DICOM metadata</td><td>pydicom</td><td>Complete DICOM standard support</td></tr><tr><td>Batch convert DICOM‚ÜíNIfTI</td><td>dcm2niix</td><td>Fastest speed, command-line friendly</td></tr><tr><td>Read/write NIfTI files</td><td>nibabel</td><td>Lightweight, correct coordinate system handling</td></tr><tr><td>Image registration/segmentation</td><td>SimpleITK</td><td>Rich built-in algorithms</td></tr><tr><td>Deep learning data loading</td><td>nibabel + PyTorch</td><td>Good integration with deep learning frameworks</td></tr><tr><td>Build complete processing pipeline</td><td>SimpleITK</td><td>One-stop solution</td></tr></tbody></table><hr><h3 id="_3-visualization-and-interactive-tools" tabindex="-1">3. Visualization and Interactive Tools <a class="header-anchor" href="#_3-visualization-and-interactive-tools" aria-label="Permalink to ‚Äú3. Visualization and Interactive Tools‚Äù">‚Äã</a></h3><p>Medical imaging processing not only requires programming tools but also visualization software to check data quality, adjust parameters, and generate demonstration materials. The following are two of the most popular open-source visualization tools.</p><h4 id="_3d-slicer-photoshop-for-medical-imaging" tabindex="-1">3D Slicer: Photoshop for Medical Imaging <a class="header-anchor" href="#_3d-slicer-photoshop-for-medical-imaging" aria-label="Permalink to ‚Äú3D Slicer: Photoshop for Medical Imaging‚Äù">‚Äã</a></h4><p><strong>Official Resources</strong>:</p><ul><li>üåê Official Website: <a href="https://www.slicer.org/" target="_blank" rel="noreferrer">https://www.slicer.org/</a></li><li>üìñ Documentation: <a href="https://slicer.readthedocs.io/" target="_blank" rel="noreferrer">https://slicer.readthedocs.io/</a></li><li>üí¨ Community Forum: <a href="https://discourse.slicer.org/" target="_blank" rel="noreferrer">https://discourse.slicer.org/</a></li></ul><p><strong>Design Philosophy</strong>: 3D Slicer is an extensible medical imaging platform originally developed by Harvard Medical School and MIT. It is not just a visualization tool, but a complete research platform that supports extending functionality through Python scripts and C++ plugins.</p><p><strong>Core Advantages</strong>:</p><ul><li><strong>Powerful 3D visualization</strong>: Supports multiplanar reconstruction (MPR), volume rendering, surface rendering</li><li><strong>Rich plugin ecosystem</strong>: Over 200 extension modules covering registration, segmentation, quantification, etc.</li><li><strong>Python script support</strong>: Run Python scripts within Slicer to automate operations</li><li><strong>DICOM support</strong>: Built-in DICOM browser, supports PACS connection</li><li><strong>Cross-platform</strong>: Full platform support for Windows, macOS, Linux</li></ul><p><strong>Applicable Scenarios</strong>:</p><ul><li>‚úÖ Interactive data exploration and quality checking</li><li>‚úÖ Manual segmentation annotation (e.g., tumor delineation)</li><li>‚úÖ Quick prototype verification (test algorithm effectiveness)</li><li>‚úÖ Generate demonstration materials (screenshots, videos)</li><li>‚úÖ Teaching demonstrations</li><li>‚ùå Batch automated processing (use command-line tools)</li><li>‚ùå Need to embed in Python workflow (use SimpleITK)</li></ul><p><strong>Core Modules</strong>:</p><table tabindex="0"><thead><tr><th>Module</th><th>Purpose</th><th>Typical Application</th></tr></thead><tbody><tr><td><strong>Data</strong></td><td>Data loading and management</td><td>Import DICOM, NIfTI, etc.</td></tr><tr><td><strong>Volumes</strong></td><td>Volume data visualization</td><td>Adjust window/level, multiplanar reconstruction</td></tr><tr><td><strong>Segmentation</strong></td><td>Image segmentation</td><td>Manual delineation, semi-automatic segmentation</td></tr><tr><td><strong>Registration</strong></td><td>Image registration</td><td>Multi-modal registration, temporal registration</td></tr><tr><td><strong>Quantification</strong></td><td>Quantitative analysis</td><td>Volume measurement, density statistics</td></tr><tr><td><strong>Extensions</strong></td><td>Extension modules</td><td>Install third-party plugins</td></tr></tbody></table><p><strong>Typical Workflow</strong>:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>1. Load data (File ‚Üí Add Data)</span></span>
<span class="line"><span>2. Adjust display (Volumes module: window/level)</span></span>
<span class="line"><span>3. Create segmentation (Segmentation module: manual delineation)</span></span>
<span class="line"><span>4. Export results (File ‚Üí Save)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">üí° 3D Slicer Learning Curve</p><p>3D Slicer is powerful but has a steep learning curve. Recommendations:</p><ol><li>Start with official tutorials: <a href="https://slicer.readthedocs.io/en/latest/user_guide/getting_started.html" target="_blank" rel="noreferrer">https://slicer.readthedocs.io/en/latest/user_guide/getting_started.html</a></li><li>Watch YouTube video tutorials</li><li>Ask questions on the forum: <a href="https://discourse.slicer.org/" target="_blank" rel="noreferrer">https://discourse.slicer.org/</a></li><li>Master basic loading, visualization, segmentation functions first, then explore advanced features</li></ol></div><hr><h4 id="itk-snap-lightweight-tool-focused-on-segmentation" tabindex="-1">ITK-SNAP: Lightweight Tool Focused on Segmentation <a class="header-anchor" href="#itk-snap-lightweight-tool-focused-on-segmentation" aria-label="Permalink to ‚ÄúITK-SNAP: Lightweight Tool Focused on Segmentation‚Äù">‚Äã</a></h4><p><strong>Official Resources</strong>:</p><ul><li>üåê Official Website: <a href="https://www.itksnap.org/" target="_blank" rel="noreferrer">https://www.itksnap.org/</a></li><li>üìñ Documentation: <a href="https://www.itksnap.org/pmwiki/pmwiki.php?n=Documentation.HomePage" target="_blank" rel="noreferrer">https://www.itksnap.org/pmwiki/pmwiki.php?n=Documentation.HomePage</a></li></ul><p><strong>Design Philosophy</strong>: ITK-SNAP, developed by the University of Pennsylvania, focuses on manual and semi-automatic segmentation of medical images. It is lighter than 3D Slicer, starts faster, has a simpler interface, and is very suitable for quick segmentation tasks.</p><p><strong>Core Advantages</strong>:</p><ul><li><strong>Gentle learning curve</strong>: Intuitive interface, easy to learn</li><li><strong>Fast startup</strong>: 5-10 times faster than 3D Slicer</li><li><strong>Focused on segmentation</strong>: Provides multiple segmentation tools (manual, semi-automatic, automatic)</li><li><strong>Snake active contour</strong>: Classic Snake algorithm implementation</li><li><strong>Multi-label support</strong>: Can segment multiple structures simultaneously</li></ul><p><strong>Applicable Scenarios</strong>:</p><ul><li>‚úÖ Quick manual segmentation</li><li>‚úÖ Teaching demonstrations (simple interface)</li><li>‚úÖ Scenarios requiring fast startup</li><li>‚ùå Need complex image processing workflows (use 3D Slicer)</li><li>‚ùå Need plugin extensions (use 3D Slicer)</li></ul><p><strong>3D Slicer vs ITK-SNAP Comparison</strong>:</p><table tabindex="0"><thead><tr><th>Feature</th><th>3D Slicer</th><th>ITK-SNAP</th></tr></thead><tbody><tr><td><strong>Learning Curve</strong></td><td>Steep</td><td>Gentle</td></tr><tr><td><strong>Feature Range</strong></td><td>Broad (platform-level)</td><td>Focused on segmentation</td></tr><tr><td><strong>Plugin Ecosystem</strong></td><td>Rich (200+)</td><td>Limited</td></tr><tr><td><strong>Startup Speed</strong></td><td>Slow (10-30 seconds)</td><td>Fast (1-3 seconds)</td></tr><tr><td><strong>Python Scripts</strong></td><td>Supported</td><td>Not supported</td></tr><tr><td><strong>Recommended Scenario</strong></td><td>Research platform</td><td>Quick segmentation</td></tr><tr><td><strong>Community Support</strong></td><td>Active</td><td>Moderate</td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">üí° When to Choose Which Tool?</p><ul><li><strong>Choose 3D Slicer</strong>: Need a complete research platform, willing to invest time in learning</li><li><strong>Choose ITK-SNAP</strong>: Only need quick segmentation, pursue simplicity and efficiency</li><li><strong>Use both</strong>: Use ITK-SNAP for quick viewing, use 3D Slicer for in-depth analysis</li></ul></div><hr><h3 id="_4-command-line-tool-suite" tabindex="-1">4. Command-Line Tool Suite <a class="header-anchor" href="#_4-command-line-tool-suite" aria-label="Permalink to ‚Äú4. Command-Line Tool Suite‚Äù">‚Äã</a></h3><p>In addition to general-purpose tools, the neuroimaging field has three long-established &quot;heavyweight&quot; toolkits: FSL, FreeSurfer, and AFNI. They provide complete workflows from preprocessing to statistical analysis.</p><h4 id="fsl-freesurfer-afni-the-big-three-of-neuroimaging" tabindex="-1">FSL, FreeSurfer, AFNI: The Big Three of Neuroimaging <a class="header-anchor" href="#fsl-freesurfer-afni-the-big-three-of-neuroimaging" aria-label="Permalink to ‚ÄúFSL, FreeSurfer, AFNI: The Big Three of Neuroimaging‚Äù">‚Äã</a></h4><p><strong>Official Resources</strong>:</p><ul><li>üåê <strong>FSL</strong>: <a href="https://fsl.fmrib.ox.ac.uk/" target="_blank" rel="noreferrer">https://fsl.fmrib.ox.ac.uk/</a></li><li>üåê <strong>FreeSurfer</strong>: <a href="https://surfer.nmr.mgh.harvard.edu/" target="_blank" rel="noreferrer">https://surfer.nmr.mgh.harvard.edu/</a></li><li>üåê <strong>AFNI</strong>: <a href="https://afni.nimh.nih.gov/" target="_blank" rel="noreferrer">https://afni.nimh.nih.gov/</a></li></ul><p><strong>Common Features</strong>:</p><ul><li>Command-line focused (also have GUI components)</li><li>Focus on neuroimaging analysis (fMRI, DTI, structural imaging)</li><li>Include complete processing workflows (preprocessing ‚Üí analysis ‚Üí statistics)</li><li>Steep learning curve, but powerful functionality</li><li>Widely used in academia</li></ul><p><strong>Tool Comparison</strong>:</p><table tabindex="0"><thead><tr><th>Tool</th><th>Specialty</th><th>Learning Curve</th><th>Community Support</th><th>Typical Application</th></tr></thead><tbody><tr><td><strong>FSL</strong></td><td>Functional MRI, Diffusion MRI</td><td>Moderate</td><td>Excellent</td><td>fMRI analysis, DTI fiber tracking</td></tr><tr><td><strong>FreeSurfer</strong></td><td>Cortical reconstruction, Morphology</td><td>Steep</td><td>Excellent</td><td>Cortical thickness, brain region segmentation</td></tr><tr><td><strong>AFNI</strong></td><td>Functional MRI, Statistical analysis</td><td>Steep</td><td>Good</td><td>fMRI time series analysis</td></tr></tbody></table><p><strong>FSL Core Tools</strong>:</p><ul><li><strong>BET</strong>: Brain Extraction Tool</li><li><strong>FLIRT/FNIRT</strong>: Linear/non-linear registration</li><li><strong>FEAT</strong>: fMRI analysis</li><li><strong>TBSS</strong>: Tract-Based Spatial Statistics</li></ul><p><strong>FreeSurfer Core Workflow</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Complete cortical reconstruction workflow (requires 12-24 hours)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">recon-all</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -subject</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> subj01</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> T1.nii.gz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -all</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>AFNI Core Tools</strong>:</p><ul><li><strong>3dvolreg</strong>: Volume registration</li><li><strong>3dDeconvolve</strong>: fMRI statistical modeling</li><li><strong>3dClustSim</strong>: Multiple comparison correction</li></ul><div class="warning custom-block"><p class="custom-block-title">‚ö†Ô∏è Scope of This Tutorial</p><p>These toolkits contain complete neuroimaging analysis workflows, <strong>beyond the scope of this tutorial (preprocessing before reconstruction)</strong>. We will use some of their functions in Chapter 2 (such as FSL&#39;s BET brain extraction), but will not deeply explain complete fMRI or DTI analysis workflows.</p><p>If your research direction is neuroimaging analysis, I recommend learning:</p><ul><li><strong>FSL Course</strong>: <a href="https://fsl.fmrib.ox.ac.uk/fslcourse/" target="_blank" rel="noreferrer">https://fsl.fmrib.ox.ac.uk/fslcourse/</a></li><li><strong>FreeSurfer Tutorial</strong>: <a href="https://surfer.nmr.mgh.harvard.edu/fswiki/Tutorials" target="_blank" rel="noreferrer">https://surfer.nmr.mgh.harvard.edu/fswiki/Tutorials</a></li><li><strong>AFNI Bootcamp</strong>: <a href="https://afni.nimh.nih.gov/pub/dist/doc/htmldoc/" target="_blank" rel="noreferrer">https://afni.nimh.nih.gov/pub/dist/doc/htmldoc/</a></li></ul></div><hr><h2 id="üß≠-tool-selection-guide" tabindex="-1">üß≠ Tool Selection Guide <a class="header-anchor" href="#üß≠-tool-selection-guide" aria-label="Permalink to ‚Äúüß≠ Tool Selection Guide‚Äù">‚Äã</a></h2><p>Theory is important, but in actual work, the most critical question is: <strong>Facing a specific scenario, how do I quickly select the right tool?</strong> The following are recommendations for several typical scenarios.</p><h3 id="scenario-1-i-m-a-python-developer-and-want-to-process-dicom-data" tabindex="-1">Scenario 1: I&#39;m a Python Developer and Want to Process DICOM Data <a class="header-anchor" href="#scenario-1-i-m-a-python-developer-and-want-to-process-dicom-data" aria-label="Permalink to ‚ÄúScenario 1: I&#39;m a Python Developer and Want to Process DICOM Data‚Äù">‚Äã</a></h3><p><strong>Background</strong>: You have programming experience and want to build automated workflows using Python.</p><p><strong>Recommended Approach</strong>:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Phase 1: Data Exploration</span></span>
<span class="line"><span>‚îî‚îÄ 3D Slicer (visualize and check data quality)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Phase 2: Development</span></span>
<span class="line"><span>‚îú‚îÄ pydicom (read DICOM metadata and pixel data)</span></span>
<span class="line"><span>‚îú‚îÄ nibabel (if need to convert to NIfTI)</span></span>
<span class="line"><span>‚îî‚îÄ matplotlib (quick visualization)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Phase 3: Production</span></span>
<span class="line"><span>‚îú‚îÄ dcm2niix (batch convert DICOM‚ÜíNIfTI)</span></span>
<span class="line"><span>‚îî‚îÄ SimpleITK (image processing operations)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>Example Code</strong>:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pydicom</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nibabel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nib</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SimpleITK </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. Read DICOM with pydicom</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pydicom.dcmread(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ct.dcm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Patient: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ds.PatientName</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, Slice Thickness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ds.SliceThickness</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. Batch convert with dcm2niix (command-line)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># dcm2niix -o output_dir -z y input_dir</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. Read NIfTI with nibabel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">img </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nib.load(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ct.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.get_fdata()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. Process with SimpleITK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sitk_img </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.ReadImage(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ct.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resampled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.Resample(sitk_img, new_size, sitk.Transform())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><hr><h3 id="scenario-2-i-need-to-batch-convert-dicom-to-nifti" tabindex="-1">Scenario 2: I Need to Batch Convert DICOM to NIfTI <a class="header-anchor" href="#scenario-2-i-need-to-batch-convert-dicom-to-nifti" aria-label="Permalink to ‚ÄúScenario 2: I Need to Batch Convert DICOM to NIfTI‚Äù">‚Äã</a></h3><p><strong>Background</strong>: You have 1000 patients&#39; DICOM data that needs to be converted to NIfTI format for research.</p><p><strong>Recommended Approach</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Option A: Simplest (recommended)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dcm2niix</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> output_dir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;%p_%s&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -z</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input_dir</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Option B: More control (Python script)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Use pydicom to traverse DICOM hierarchy, then call dcm2niix</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Advanced Tips</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Batch process multiple patients</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> patient_dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/patients/*/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    dcm2niix</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /output/&quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">basename</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$patient_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;)&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -z</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$patient_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">done</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Preserve BIDS-format metadata</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dcm2niix</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> y</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -z</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> y</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;%p_%s&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input_dir</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Output: patient_series.nii.gz + patient_series.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><h3 id="scenario-3-i-need-to-visualize-and-check-data-quality" tabindex="-1">Scenario 3: I Need to Visualize and Check Data Quality <a class="header-anchor" href="#scenario-3-i-need-to-visualize-and-check-data-quality" aria-label="Permalink to ‚ÄúScenario 3: I Need to Visualize and Check Data Quality‚Äù">‚Äã</a></h3><p><strong>Background</strong>: You just received a batch of data and need to quickly check for scanning artifacts, annotation errors, etc.</p><p><strong>Recommended Approach</strong>:</p><table tabindex="0"><thead><tr><th>Need</th><th>Recommended Tool</th><th>Reason</th></tr></thead><tbody><tr><td><strong>Quick Browse</strong></td><td>ITK-SNAP</td><td>Fast startup, simple interface</td></tr><tr><td><strong>In-depth Analysis</strong></td><td>3D Slicer</td><td>Powerful, adjustable parameters</td></tr><tr><td><strong>Programmatic</strong></td><td>matplotlib + nibabel</td><td>Automated batch checking</td></tr></tbody></table><p><strong>Python Automated Checking Example</strong>:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nibabel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nib</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> matplotlib.pyplot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> plt</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numpy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> quick_check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nifti_path):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;Quick check NIfTI file&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    img </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nib.load(nifti_path)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.get_fdata()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Check 1: Data range</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Data range: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data.min()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:.2f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data.max()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:.2f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Check 2: NaN or Inf values</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np.isnan(data).any():</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;‚ö†Ô∏è Warning: Data contains NaN values&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Check 3: Visualize middle slice</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mid_slice </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data.shape[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">//</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    plt.imshow(data[:, :, mid_slice], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cmap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;gray&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    plt.title(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nifti_path</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> - Slice </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mid_slice</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    plt.show()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Batch check</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> glob</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> glob.glob(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data/*.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    quick_check(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><hr><h3 id="scenario-4-i-need-to-build-a-complete-processing-pipeline" tabindex="-1">Scenario 4: I Need to Build a Complete Processing Pipeline <a class="header-anchor" href="#scenario-4-i-need-to-build-a-complete-processing-pipeline" aria-label="Permalink to ‚ÄúScenario 4: I Need to Build a Complete Processing Pipeline‚Äù">‚Äã</a></h3><p><strong>Background</strong>: You need to start from raw DICOM data, go through preprocessing, registration, segmentation, and finally get data ready for analysis.</p><p><strong>Recommended Tech Stack</strong>:</p>`,74)),n(a,{id:"mermaid-ihcib66bb",code:`graph LR
    A[DICOM Data] -->|dcm2niix| B[NIfTI Format]
    B -->|SimpleITK| C[Preprocessing]
    C -->|NumPy/SciPy| D[Algorithm Implementation]
    D -->|PyTorch/TF| E[Deep Learning]
    E -->|nibabel| F[Save Results]

    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
    style D fill:#e1ffe1
    style E fill:#f5e1ff
    style F fill:#ffe1e1`}),s[3]||(s[3]=i(`<p><strong>Complete Pipeline Example</strong>:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> subprocess</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SimpleITK </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nibabel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nib</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numpy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Step 1: Format conversion</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subprocess.run([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;dcm2niix&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;-o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nifti_output&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;-z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;dicom_input&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Step 2: Preprocessing (SimpleITK)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.ReadImage(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nifti_output/scan.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.1 Resample to uniform spacing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resampled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.Resample(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    image,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sitk.Transform(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sitk.sitkLinear,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    image.GetOrigin(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    image.GetDirection()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.2 Denoising</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">denoised </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.CurvatureFlow(resampled, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">timeStep</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.125</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">numberOfIterations</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Step 3: Convert to NumPy for algorithm processing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.GetArrayFromImage(denoised)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ... your algorithm implementation ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Step 4: Save results</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result_image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sitk.GetImageFromArray(array)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result_image.CopyInformation(denoised)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sitk.WriteImage(result_image, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;result.nii.gz&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">üí° Best Practices for Pipeline Design</p><ol><li><strong>Modularity</strong>: Make each step an independent function for testing and reuse</li><li><strong>Save intermediate results</strong>: Save key steps for debugging</li><li><strong>Logging</strong>: Record parameters and runtime for each step</li><li><strong>Error handling</strong>: Catch exceptions to prevent batch processing interruption</li><li><strong>Version control</strong>: Use Git to manage code and track parameter changes</li></ol></div><hr><h2 id="üìö-learning-resources-and-community" tabindex="-1">üìö Learning Resources and Community <a class="header-anchor" href="#üìö-learning-resources-and-community" aria-label="Permalink to ‚Äúüìö Learning Resources and Community‚Äù">‚Äã</a></h2><h3 id="official-documentation" tabindex="-1">Official Documentation <a class="header-anchor" href="#official-documentation" aria-label="Permalink to ‚ÄúOfficial Documentation‚Äù">‚Äã</a></h3><table tabindex="0"><thead><tr><th>Tool</th><th>Documentation Link</th><th>Features</th></tr></thead><tbody><tr><td><strong>dcm2niix</strong></td><td><a href="https://github.com/rordenlab/dcm2niix" target="_blank" rel="noreferrer">https://github.com/rordenlab/dcm2niix</a></td><td>Detailed README, rich examples</td></tr><tr><td><strong>pydicom</strong></td><td><a href="https://pydicom.github.io/" target="_blank" rel="noreferrer">https://pydicom.github.io/</a></td><td>Complete API documentation, tutorials</td></tr><tr><td><strong>nibabel</strong></td><td><a href="https://nipy.org/nibabel/" target="_blank" rel="noreferrer">https://nipy.org/nibabel/</a></td><td>Detailed manual, code examples</td></tr><tr><td><strong>SimpleITK</strong></td><td><a href="https://simpleitk.readthedocs.io/" target="_blank" rel="noreferrer">https://simpleitk.readthedocs.io/</a></td><td>Comprehensive documentation, Jupyter tutorials</td></tr><tr><td><strong>3D Slicer</strong></td><td><a href="https://slicer.readthedocs.io/" target="_blank" rel="noreferrer">https://slicer.readthedocs.io/</a></td><td>User guide and developer documentation</td></tr><tr><td><strong>ITK-SNAP</strong></td><td><a href="https://www.itksnap.org/pmwiki/pmwiki.php?n=Documentation.HomePage" target="_blank" rel="noreferrer">https://www.itksnap.org/pmwiki/pmwiki.php?n=Documentation.HomePage</a></td><td>Tutorials and videos</td></tr></tbody></table><h3 id="recommended-tutorials" tabindex="-1">Recommended Tutorials <a class="header-anchor" href="#recommended-tutorials" aria-label="Permalink to ‚ÄúRecommended Tutorials‚Äù">‚Äã</a></h3><p><strong>Python Medical Imaging Processing</strong>:</p><ul><li><p><strong>SimpleITK Notebooks</strong>: <a href="https://github.com/InsightSoftwareConsortium/SimpleITK-Notebooks" target="_blank" rel="noreferrer">https://github.com/InsightSoftwareConsortium/SimpleITK-Notebooks</a></p><ul><li>100+ Jupyter Notebook tutorials covering all topics from basic to advanced</li><li>Can run online (Binder) or locally</li></ul></li><li><p><strong>NiBabel Tutorial</strong>: <a href="https://nipy.org/nibabel/gettingstarted.html" target="_blank" rel="noreferrer">https://nipy.org/nibabel/gettingstarted.html</a></p><ul><li>Official getting started tutorial, suitable for beginners</li></ul></li></ul><p><strong>Neuroimaging Analysis</strong>:</p><ul><li><p><strong>FSL Course</strong>: <a href="https://fsl.fmrib.ox.ac.uk/fslcourse/" target="_blank" rel="noreferrer">https://fsl.fmrib.ox.ac.uk/fslcourse/</a></p><ul><li>Official course from University of Oxford, includes videos and practice data</li></ul></li><li><p><strong>FreeSurfer Tutorial</strong>: <a href="https://surfer.nmr.mgh.harvard.edu/fswiki/Tutorials" target="_blank" rel="noreferrer">https://surfer.nmr.mgh.harvard.edu/fswiki/Tutorials</a></p><ul><li>Official tutorial from Harvard Medical School</li></ul></li><li><p><strong>Andy&#39;s Brain Book</strong>: <a href="https://andysbrainbook.readthedocs.io/" target="_blank" rel="noreferrer">https://andysbrainbook.readthedocs.io/</a></p><ul><li>Unofficial but high-quality neuroimaging tutorial covering FSL, FreeSurfer, AFNI</li></ul></li></ul><h3 id="community-support" tabindex="-1">Community Support <a class="header-anchor" href="#community-support" aria-label="Permalink to ‚ÄúCommunity Support‚Äù">‚Äã</a></h3><p><strong>Mailing Lists and Forums</strong>:</p><ul><li><p><strong>NiPy Mailing List</strong>: <a href="http://mail.python.org/mailman/listinfo/neuroimaging" target="_blank" rel="noreferrer">http://mail.python.org/mailman/listinfo/neuroimaging</a></p><ul><li>Main discussion platform for Python neuroimaging community</li><li>Covers nibabel, nipype, and other tools</li></ul></li><li><p><strong>3D Slicer Forum</strong>: <a href="https://discourse.slicer.org/" target="_blank" rel="noreferrer">https://discourse.slicer.org/</a></p><ul><li>Active community with quick responses</li><li>Good for asking questions and sharing experiences</li></ul></li><li><p><strong>DICOM Standard Discussion</strong>: comp.protocols.dicom (Usenet newsgroup)</p><ul><li>Official discussion group for DICOM standard</li><li>Suitable for in-depth technical questions</li></ul></li></ul><p><strong>GitHub Issues</strong>:</p><ul><li>Most tools are open-source on GitHub, can directly file Issues to report bugs or request features</li><li>Search for similar issues before filing</li></ul><p><strong>Stack Overflow</strong>:</p><ul><li>Tags: <code>[medical-imaging]</code>, <code>[pydicom]</code>, <code>[simpleitk]</code>, <code>[nibabel]</code></li><li>Suitable for specific programming questions</li></ul><div class="info custom-block"><p class="custom-block-title">üí° How to Ask Questions Effectively?</p><ol><li><strong>Provide minimal reproducible example</strong>: Simplify the problem, provide runnable code</li><li><strong>State environment information</strong>: Operating system, Python version, library versions</li><li><strong>Describe expected and actual behavior</strong>: Clearly state what you expect and what actually happened</li><li><strong>Attach error messages</strong>: Complete error stack, don&#39;t use screenshots</li><li><strong>Search before asking</strong>: Check if similar issues exist first</li></ol></div><hr><h2 id="üéØ-key-points-summary" tabindex="-1">üéØ Key Points Summary <a class="header-anchor" href="#üéØ-key-points-summary" aria-label="Permalink to ‚ÄúüéØ Key Points Summary‚Äù">‚Äã</a></h2><h3 id="three-principles-for-tool-selection" tabindex="-1">Three Principles for Tool Selection <a class="header-anchor" href="#three-principles-for-tool-selection" aria-label="Permalink to ‚ÄúThree Principles for Tool Selection‚Äù">‚Äã</a></h3><ol><li><p><strong>Simplicity first</strong>: If a command-line tool can solve it, don&#39;t write Python scripts</p><ul><li>Batch convert DICOM? Use dcm2niix, don&#39;t write conversion scripts yourself</li><li>Standardized preprocessing workflow? Use FSL/FreeSurfer, don&#39;t reinvent the wheel</li></ul></li><li><p><strong>Standards first</strong>: Prioritize tools widely used by the community</p><ul><li>DICOM conversion: dcm2niix (not MRIcron or others)</li><li>Python DICOM library: pydicom (not dicom or others)</li><li>NIfTI read/write: nibabel (not parsing file headers yourself)</li></ul></li><li><p><strong>Scenario first</strong>: Choose tools based on specific needs, don&#39;t pursue &quot;universal tools&quot;</p><ul><li>Quick viewing? Use ITK-SNAP (not 3D Slicer)</li><li>Complex processing? Use SimpleITK (not nibabel)</li><li>Deep learning? Use PyTorch/TensorFlow (not SimpleITK)</li></ul></li></ol><h3 id="tool-relationships-in-subsequent-chapters" tabindex="-1">Tool Relationships in Subsequent Chapters <a class="header-anchor" href="#tool-relationships-in-subsequent-chapters" aria-label="Permalink to ‚ÄúTool Relationships in Subsequent Chapters‚Äù">‚Äã</a></h3><div class="warning custom-block"><p class="custom-block-title">üìñ Scope of This Tutorial</p><p>This tutorial is a <strong>theory-oriented</strong> introductory tutorial on medical imaging processing, focusing on understanding principles and concepts rather than complete programming practice. Code examples are only for demonstrating concepts and helping understand theory.</p></div><p><strong>Chapter 2 (Preprocessing before Reconstruction)</strong>:</p><ul><li>Theory introduces principles of various preprocessing workflows (dark current correction, gain correction, beam hardening correction, etc.)</li><li>Mentions <strong>pydicom</strong> can be used to read scanning parameters, but won&#39;t explain programming implementation in detail</li><li>Mentions tools like <strong>dcm2niix</strong>, <strong>FSL BET</strong>, etc., as supplements to theory</li></ul><p><strong>Chapter 3 (Image Reconstruction Algorithms)</strong>:</p><ul><li>Theory introduces mathematical principles of reconstruction algorithms (FBP, Fourier reconstruction, iterative reconstruction, etc.)</li><li>Uses mathematical formulas and diagrams to explain algorithm workflows</li><li>Does not include complete algorithm implementation code</li></ul><p><strong>Chapter 4 (Reconstruction Practice and Verification)</strong>:</p><ul><li>Provides <strong>simple code examples</strong> demonstrating basic concepts (e.g., reading data, simple processing)</li><li>Uses <strong>3D Slicer</strong> and other visualization tools for result display</li><li>Focus is on &quot;verifying theory&quot; rather than &quot;building production systems&quot;</li></ul><p><strong>Positioning of Tools in This Chapter</strong>:</p><ul><li>These tools are <strong>optional learning resources</strong> to help you explore further outside class</li><li>If you want to do actual medical imaging processing projects, these tools are essential</li><li>But in this tutorial, we focus more on <strong>understanding principles</strong> than <strong>mastering tools</strong></li></ul><h3 id="recommended-learning-path" tabindex="-1">Recommended Learning Path <a class="header-anchor" href="#recommended-learning-path" aria-label="Permalink to ‚ÄúRecommended Learning Path‚Äù">‚Äã</a></h3>`,35)),n(a,{id:"mermaid-s72k4xo30",code:`graph TD
    A[Week 1: Basic Tools] --> B[Week 2: Python Libraries]
    B --> C[Week 3: Visualization Tools]
    C --> D[Week 4: Complete Pipeline]

    A --> A1[dcm2niix basic usage]
    A --> A2[Command-line basics]

    B --> B1[pydicom read DICOM]
    B --> B2[nibabel read/write NIfTI]
    B --> B3[SimpleITK basic operations]

    C --> C1[3D Slicer basic functions]
    C --> C2[ITK-SNAP quick segmentation]

    D --> D1[Build processing pipeline]
    D --> D2[Debug and optimize]

    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
    style D fill:#e1ffe1`}),s[4]||(s[4]=i('<p><strong>Recommendations for Further Learning</strong> (if you want to practice deeply):</p><ol><li><strong>Don&#39;t try to learn all tools at once</strong>: Master dcm2niix + pydicom + nibabel first</li><li><strong>Learn by doing</strong>: Find a small project (e.g., convert 10 DICOM files) and practice</li><li><strong>Read official documentation</strong>: Don&#39;t just read blog tutorials, official docs are most authoritative</li><li><strong>Join the community</strong>: Ask questions on forums, read others&#39; questions and answers</li><li><strong>Stay updated</strong>: Medical imaging tools update frequently, check Release Notes regularly</li></ol><div class="tip custom-block"><p class="custom-block-title">üí° Relationship Between This Tutorial and Tool Practice</p><p>The subsequent chapters of this tutorial (Chapters 2, 3) are mainly <strong>theory introductions</strong>, not requiring you to master these tools. But if you want to do actual medical imaging processing projects outside class, these tools are essential. Recommendation: Complete theory learning first, then selectively deepen tool practice based on interest.</p></div><hr><div class="info custom-block"><p class="custom-block-title">üí° Next Steps</p><p>Now you have learned about the open source tool ecosystem for medical imaging processing. In <strong>Chapter 2 (Preprocessing before Reconstruction)</strong>, we will deeply learn the <strong>theoretical principles</strong> of modality-specific correction workflows:</p><ul><li><strong>2.1 CT</strong>: From detector signal to corrected projection (dark current correction, gain correction, beam hardening correction)</li><li><strong>2.2 MRI</strong>: k-space data preprocessing (phase correction, motion correction, parallel imaging)</li><li><strong>2.3 X-ray</strong>: Direct imaging correction (flat-field correction, scatter correction)</li></ul><p>Chapter 2 will use mathematical formulas, diagrams, and theoretical analysis to help you understand the <strong>why</strong> and <strong>how</strong> of these preprocessing workflows. If you want to further practice, you can combine the tools introduced in this chapter for exploration outside class.</p></div>',5))])}const y=e(p,[["render",o]]);export{u as __pageData,y as default};
